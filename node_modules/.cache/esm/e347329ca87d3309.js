let express,bodyParser,cors,database,PORT,artistsRoutes,albumRoutes;_a87‍.w("express",[["default",["express"],function(v){express=v}]]);_a87‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);_a87‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_a87‍.w("./config/database",[["default",["database"],function(v){database=v}]]);_a87‍.w("./config/properties",[["PORT",["PORT"],function(v){PORT=v}]]);_a87‍.w("./artists/artists.routes",[["default",["artistsRoutes"],function(v){artistsRoutes=v}]]);_a87‍.w("./albums/albums.routes",[["default",["albumRoutes"],function(v){albumRoutes=v}]]);







const app = express();
const router = express.Router();

database();

// process incoming json.
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));

//allow cors
app.use(cors());

//from stackoverflow.
app.all('/*', function(req, res, next) {
    res.header('Access-Control-Allow-Origin', '*');
    res.header(
        'Access-Control-Allow-Headers',
        'X-Requested-With, Content-Type'
    );
    res.header('Access-Control-Allow-Methods', 'GET, POST', 'PUT');
    next();
});

app.use('/api/v1/', router);
artistsRoutes(router);
albumRoutes(router);

app.listen(PORT, () => {
    console.log(`Server started on http://localhost:${PORT}`);
});
